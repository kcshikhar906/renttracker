# Firebase App Hosting Configuration
# This file tells Firebase how to build and run your application.
# For a Vite project, we want to build the static site and serve it.

kind: "apphosting"
schemaVersion: "v1"

# Build configuration
# Firebase will automatically run 'npm run build' if it detects a package.json
# We specify where the build output is located.
# Note: App Hosting currently expects a server for some configurations,
# but providing a clear start command or using a supported framework is key.

runConfig:
  # App Hosting expects a process to listen on the port defined by $PORT
  # For static Vite apps, we can use a simple node server to serve 'dist'
  command: "npm run start"

# Environment variables for build and runtime
# To keep your app on the "safe side", we reference secrets stored in Google Cloud Secret Manager.
# This prevents your API keys from appearing in your Git repository.
env:
  - variable: VITE_FIREBASE_API_KEY
    secret: FIREBASE_API_KEY
  - variable: VITE_FIREBASE_AUTH_DOMAIN
    secret: FIREBASE_AUTH_DOMAIN
  - variable: VITE_FIREBASE_PROJECT_ID
    secret: FIREBASE_PROJECT_ID
  - variable: VITE_FIREBASE_STORAGE_BUCKET
    secret: FIREBASE_STORAGE_BUCKET
  - variable: VITE_FIREBASE_MESSAGING_SENDER_ID
    secret: FIREBASE_MESSAGING_SENDER_ID
  - variable: VITE_FIREBASE_APP_ID
    secret: FIREBASE_APP_ID
